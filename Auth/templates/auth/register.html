{% load static %}
<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.0.3/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="bg-gray-100 h-screen flex justify-center items-center">
    <div class="max-w-md w-full p-8 bg-white shadow-lg rounded-lg">
      <h2 class="text-2xl font-bold text-center mb-6">Register</h2>
      <form method="POST" id="registerForm">
        {% csrf_token %}

        <div class="mb-4">
          <label for="email" class="block text-sm font-medium text-gray-700"
            >Email</label
          >
          {% if form.email.errors %}
          <div class="text-red-600 text-sm">
            {% for error in form.email.errors %}
            <p>{{ error }}</p>
            {% endfor %}
          </div>
          {% endif %}
          <input
            type="email"
            name="email"
            id="email"
            class="mt-1 px-4 py-2 w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            value="{{ form.email.value|default:'' }}"
            required
          />
        </div>

        <div class="mb-4">
          <label for="password1" class="block text-sm font-medium text-gray-700"
            >Password</label
          >
          {% if form.password1.errors %}
          <div class="text-red-600 text-sm">
            {% for error in form.password1.errors %}
            <p>{{ error }}</p>
            {% endfor %}
          </div>
          {% endif %}
          <div class="relative">
            <input
              type="password"
              name="password1"
              id="password1"
              class="mt-1 px-4 py-2 w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              required
            />
            <button
              type="button"
              id="togglePasswordRegister"
              class="absolute inset-y-0 right-3 flex items-center text-gray-500 focus:outline-none"
            >
              <i class="fas fa-eye"></i>
            </button>
          </div>
        </div>

        <div class="mb-4">
          <label for="password2" class="block text-sm font-medium text-gray-700"
            >Konfirmasi Password</label
          >
          {% if form.password2.errors %}
          <div class="text-red-600 text-sm">
            {% for error in form.password2.errors %}
            <p>{{ error }}</p>
            {% endfor %}
          </div>
          {% endif %}
          <div class="relative">
            <input
              type="password"
              name="password2"
              id="password2"
              class="mt-1 px-4 py-2 w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              required
            />
            <button
              type="button"
              id="toggleConfirmPasswordRegister"
              class="absolute inset-y-0 right-3 flex items-center text-gray-500 focus:outline-none"
            >
              <i class="fas fa-eye"></i>
            </button>
          </div>
        </div>

        <button
          type="submit"
          class="w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"
        >
          Daftar
        </button>

        {% if form.errors %}
        <div class="mt-4 bg-red-100 text-red-600 p-3 rounded-md">
          <ul>
            {% for field in form %} {% for error in field.errors %}
            <li>{{ error }}</li>
            {% endfor %} {% endfor %}
          </ul>
        </div>
        {% endif %}
      </form>

      <div class="text-center mt-4">
        <span>
          Sudah punya akun?
          <a href="{% url 'login' %}" class="text-blue-500 hover:underline"
            >Sign In</a
          >
        </span>
      </div>
    </div>

    <script>
      document
        .getElementById("togglePasswordRegister")
        .addEventListener("click", function () {
          const passwordField = document.getElementById("password1");
          const type = passwordField.type === "password" ? "text" : "password";
          passwordField.type = type;
          this.innerHTML =
            type === "password"
              ? '<i class="fas fa-eye"></i>'
              : '<i class="fas fa-eye-slash"></i>';
        });

      // Toggle confirm password visibility
      document
        .getElementById("toggleConfirmPasswordRegister")
        .addEventListener("click", function () {
          const confirmPasswordField = document.getElementById("password2");
          const type =
            confirmPasswordField.type === "password" ? "text" : "password";
          confirmPasswordField.type = type;
          this.innerHTML =
            type === "password"
              ? '<i class="fas fa-eye"></i>'
              : '<i class="fas fa-eye-slash"></i>';
        });
    </script>
  </body>
</html>
